{{!-- Import database libraries based on setup type --}}
{{#if (eq dbSetup "neon")}}
  import { neon } from '@neondatabase/serverless';
  import { drizzle } from 'drizzle-orm/neon-http';
{{else}}
  import { drizzle } from "drizzle-orm/node-postgres";
{{/if}}

{{!-- Import environment variables based on runtime --}}
{{#if (eq runtime "workers")}}
  import { env } from "cloudflare:workers";
{{else}}
  import env from "@/env";
{{/if}}

{{!-- Database setup based on setup type --}}
{{#if (eq dbSetup "neon")}}
  const sql = neon(env.DATABASE_URL);
  export const db = drizzle(sql);
{{else}}
  export const db = drizzle(env.DATABASE_URL);
{{/if}}
