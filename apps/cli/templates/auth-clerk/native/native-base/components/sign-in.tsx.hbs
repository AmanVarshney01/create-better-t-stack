import React from 'react'
import { View, Text, TouchableOpacity } from 'react-native'
import { useSignIn } from '@clerk/clerk-expo'

export function SignIn() {
  const { signIn, setActive, isLoaded } = useSignIn()

  const onSignInPress = React.useCallback(async () => {
    if (!isLoaded) return

    try {
      // TODO: Replace with actual form inputs
      // This is a template demo - integrate with real user input
      console.log('Demo: Sign in button pressed. Integrate with form inputs.')

      // Example of how to implement sign in:
      // const signInAttempt = await signIn.create({
      //   identifier: email, // from form input
      //   password: password, // from form input
      // })
      //
      // if (signInAttempt.status === 'complete') {
      //   await setActive({ session: signInAttempt.createdSessionId })
      // }
    } catch (err) {
      console.error('Sign in error:', err)
      // TODO: Show user-friendly error message
    }
  }, [isLoaded, signIn, setActive])

  return (
    <View className="flex-1 justify-center items-center p-4">
      <Text className="text-2xl font-bold mb-8">Sign In</Text>
      <TouchableOpacity
        onPress={onSignInPress}
        className="bg-blue-500 px-6 py-3 rounded-lg"
      >
        <Text className="text-white font-semibold">Sign In</Text>
      </TouchableOpacity>
    </View>
  )
}
