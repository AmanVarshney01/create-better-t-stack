import alchemy from "alchemy";
{{#if (eq webDeploy "alchemy")}}
{{#if (includes frontend "next")}}
import { Next } from "alchemy/cloudflare";
{{else if (includes frontend "nuxt")}}
import { Nuxt } from "alchemy/cloudflare";
{{else if (includes frontend "svelte")}}
import { SvelteKit } from "alchemy/cloudflare";
{{else if (includes frontend "tanstack-start")}}
import { TanStackStart } from "alchemy/cloudflare";
{{else if (includes frontend "tanstack-router")}}
import { Vite } from "alchemy/cloudflare";
{{else if (includes frontend "react-router")}}
import { ReactRouter } from "alchemy/cloudflare";
{{else if (includes frontend "solid")}}
import { Vite } from "alchemy/cloudflare";
{{/if}}
{{/if}}
{{#if (eq serverDeploy "alchemy")}}
import { Worker } from "alchemy/cloudflare";
{{/if}}

const app = await alchemy("{{projectName}}");

{{#if (eq webDeploy "alchemy")}}
{{#if (includes frontend "next")}}
export const website = await Next("website", {
  {{#if (eq serverDeploy "alchemy")}}cwd: "apps/web",{{/if}}
  name: `${app.name}-${app.stage}-website`
});
{{else if (includes frontend "nuxt")}}
export const website = await Nuxt("website", {
  {{#if (eq serverDeploy "alchemy")}}cwd: "apps/web",{{/if}}
  name: `${app.name}-${app.stage}-website`
});
{{else if (includes frontend "svelte")}}
export const website = await SvelteKit("website", {
  {{#if (eq serverDeploy "alchemy")}}cwd: "apps/web",{{/if}}
  name: `${app.name}-${app.stage}-website`
});
{{else if (includes frontend "tanstack-start")}}
export const website = await TanStackStart("website", {
  {{#if (eq serverDeploy "alchemy")}}cwd: "apps/web",{{/if}}
  name: `${app.name}-${app.stage}-website`
});
{{else if (includes frontend "tanstack-router")}}
export const website = await Vite("website", {
  {{#if (eq serverDeploy "alchemy")}}cwd: "apps/web",{{/if}}
  name: `${app.name}-${app.stage}-website`
});
{{else if (includes frontend "react-router")}}
export const website = await ReactRouter("website", {
  {{#if (eq serverDeploy "alchemy")}}cwd: "apps/web",{{/if}}
  name: `${app.name}-${app.stage}-website`
});
{{else if (includes frontend "solid")}}
export const website = await Vite("website", {
  {{#if (eq serverDeploy "alchemy")}}cwd: "apps/web",{{/if}}
  name: `${app.name}-${app.stage}-website`
});
{{/if}}
{{/if}}

{{#if (eq serverDeploy "alchemy")}}
export const worker = await Worker("worker", {
  {{#if (eq webDeploy "alchemy")}}cwd: "apps/server",{{/if}}
  name: `${app.name}-${app.stage}`,
  entrypoint: "src/index.ts"
});
{{/if}}

{{#if (and (eq webDeploy "alchemy") (eq serverDeploy "alchemy"))}}
console.log(`\nWebsite: ${website.url}`);
console.log(`Worker: ${worker.url}`);
{{else if (eq webDeploy "alchemy")}}
console.log(`\nWebsite: ${website.url}`);
{{else if (eq serverDeploy "alchemy")}}
console.log(`\nWorker: ${worker.url}`);
{{/if}}

await app.finalize();