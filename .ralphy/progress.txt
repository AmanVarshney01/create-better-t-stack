# Ralphy Progress Log

## 2026-01-19: NestJS Backend Framework Implementation

### Task: Implement NestJS as a backend framework option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "nestjs" to BackendSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added NestJS dependency versions:
   - @nestjs/core: ^11.0.20
   - @nestjs/common: ^11.0.20
   - @nestjs/platform-express: ^11.0.20
   - reflect-metadata: ^0.2.2
   - rxjs: ^7.8.1
3. **packages/template-generator/src/processors/backend-deps.ts**: Added NestJS dependency processing
4. **packages/template-generator/templates/backend/server/nestjs/**: Created NestJS templates:
   - src/index.ts.hbs - Main bootstrap file with NestFactory
   - src/app.module.ts.hbs - Root module with conditional tRPC/oRPC/AI imports
   - src/app.controller.ts.hbs - Root controller
   - src/app.service.ts.hbs - Root service
   - src/trpc/trpc.module.ts.hbs - tRPC integration module
   - src/trpc/trpc.middleware.ts.hbs - tRPC middleware adapter
   - src/orpc/orpc.module.ts.hbs - oRPC integration module
   - src/orpc/orpc.middleware.ts.hbs - oRPC middleware adapter
   - src/ai/ai.module.ts.hbs - AI example module
   - src/ai/ai.controller.ts.hbs - AI controller
   - src/ai/ai.service.ts.hbs - AI service with streaming support
5. **apps/web/src/lib/constant.ts**: Added NestJS to web builder backend options

### Features:
- Full NestJS module/controller/service architecture
- tRPC integration via Express middleware adapter
- oRPC integration via Express middleware adapter
- Better-Auth integration support
- AI SDK integration with streaming responses
- CORS configuration
- Compatible with Node.js runtime

### Status: COMPLETE


## 2026-01-19: Nodemailer Email Option Implementation

### Task: Implement Nodemailer as an email sending option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "nodemailer" to EmailSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added Nodemailer dependency versions:
   - nodemailer: ^6.10.1
   - @types/nodemailer: ^6.4.17
3. **packages/template-generator/src/processors/email-deps.ts**: Added Nodemailer dependency processing
4. **packages/template-generator/src/processors/env-vars.ts**: Added SMTP environment variables:
   - SMTP_HOST
   - SMTP_PORT
   - SMTP_SECURE
   - SMTP_USER
   - SMTP_PASS
   - SMTP_FROM_EMAIL
5. **packages/template-generator/templates/email/nodemailer/server/base/src/lib/email.ts.hbs**: Created Nodemailer email utility template with:
   - SMTP transporter configuration
   - sendEmail function with attachments support
   - verifyEmailConnection function for connection testing
   - getTransporter function for advanced usage
6. **apps/web/src/lib/constant.ts**: Added Nodemailer to web builder email options
7. **apps/web/src/lib/stack-url-state.ts**: Added email field to stack state
8. **apps/web/src/lib/stack-url-state.client.ts**: Added email field to client state
9. **apps/web/src/lib/stack-search-schema.ts**: Added "em" (email) URL param
10. **apps/cli/test/email.test.ts**: Added comprehensive Nodemailer tests

### Features:
- SMTP-based email sending via Nodemailer
- Support for Ethereal (testing), Gmail, SendGrid, AWS SES, and other SMTP providers
- Attachment support
- Connection verification utility
- SSL/TLS configuration options
- Compatible with all backend frameworks (Hono, Express, Fastify, Elysia, NestJS)

### Status: COMPLETE


## 2026-01-19: Remix Frontend Framework - Documentation Update

### Task: Mark Remix as complete in PRD (already implemented as React Router v7)

### Background:
Remix has been merged into React Router v7 framework mode. The existing "React Router" option in Better-Fullstack uses React Router v7 framework mode, which includes all Remix functionality:
- File-based routing with `@react-router/fs-routes`
- Server-side rendering with `@react-router/node` and `@react-router/serve`
- Data loading with loaders and actions
- Full-stack framework capabilities via `@react-router/dev` Vite plugin

### Changes Made:
1. **PRD.md**: Updated Remix entry from `[ ]` to `[x]` with note explaining it's implemented as "React Router" (React Router v7 framework mode, the Remix successor)

### Rationale:
- Remix v3 was cancelled; React Router v7 is the official successor
- The codebase already has full React Router v7 framework mode support under the "react-router" frontend option
- Users looking for "Remix" functionality will find it in the "React Router" option
- No new code implementation needed - this is a documentation update to reflect existing functionality

### Status: COMPLETE


## 2026-01-19: Qwik Frontend Framework Implementation

### Task: Implement Qwik as a frontend framework option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "qwik" to FrontendSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added Qwik dependency versions:
   - @builder.io/qwik: ^1.14.1
   - @builder.io/qwik-city: ^1.14.1
   - @builder.io/qwik-react: ^0.7.0
3. **packages/template-generator/templates/frontend/qwik/**: Created Qwik templates:
   - package.json.hbs - Qwik project dependencies with Tailwind conditional
   - vite.config.ts.hbs - Vite config with Qwik plugins
   - tsconfig.json.hbs - TypeScript config for Qwik
   - src/root.tsx.hbs - Root component with QwikCityProvider
   - src/entry.ssr.tsx - SSR entry point
   - src/entry.preview.tsx - Preview entry point
   - src/global.css.hbs - Global styles with Tailwind conditional
   - src/components/router-head/router-head.tsx - Document head component
   - src/components/header.tsx.hbs - Header with navigation
   - src/routes/layout.tsx.hbs - Root layout with Better T Stack styling
   - src/routes/index.tsx.hbs - Home page
   - public/favicon.svg, manifest.json, robots.txt, _gitignore
4. **packages/template-generator/src/template-handlers/frontend.ts**: Added Qwik frontend processing
5. **packages/template-generator/src/processors/css-ui-deps.ts**: Added Qwik to frontend checks
6. **apps/cli/src/utils/compatibility.ts**: Added "qwik" to WEB_FRAMEWORKS
7. **apps/cli/src/utils/compatibility-rules.ts**: Added Qwik-specific validations:
   - Qwik must use backend="none" (has its own built-in server capabilities)
   - Qwik must use api="none" (doesn't support tRPC/oRPC external API layers)
   - Updated isFrontendAllowedWithBackend and allowedApisForFrontends
8. **apps/cli/src/constants.ts**: Added Qwik to compatibility mappings:
   - Added to ADDON_COMPATIBILITY (pwa, tauri)
   - Added to UI_LIBRARY_COMPATIBILITY (daisyui, none)
   - Added qwik: "daisyui" to DEFAULT_UI_LIBRARY_BY_FRONTEND
9. **apps/web/src/lib/constant.ts**: Added Qwik to web builder frontend options with purple icon
10. **apps/cli/test/frontend.test.ts**: Added Qwik-specific tests:
    - Test for Qwik standalone (no backend)
    - Tests for Qwik incompatibility with tRPC and oRPC APIs

### Features:
- Full Qwik City framework support with file-based routing
- Resumable architecture for instant load times
- SSR and preview entry points
- Tailwind CSS conditional support (via daisyUI)
- Standalone mode (no external backend needed - Qwik has built-in server capabilities)
- Compatible with PWA and Tauri addons

### Technical Notes:
- Qwik uses resumability instead of hydration for superior performance
- Qwik City provides file-based routing similar to Next.js/SvelteKit
- Qwik works standalone (backend="none") because it has its own server capabilities
- daisyUI is the default UI library for Qwik (shadcn-ui requires React)

### Status: COMPLETE


## 2026-01-19: ts-rest API Layer Implementation

### Task: Implement ts-rest as an API layer option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "ts-rest" to APISchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added ts-rest dependency versions:
   - @ts-rest/core: ^3.55.0
   - @ts-rest/react-query: ^3.55.0
   - @ts-rest/serverless: ^3.55.0
   - @ts-rest/next: ^3.55.0
3. **packages/template-generator/src/processors/api-deps.ts**: Added ts-rest dependency processing for:
   - API package dependencies (core + zod)
   - Server dependencies (core + serverless)
   - Self backend web dependencies (core + serverless + next)
   - Web client dependencies (core + react-query)
   - Native client dependencies (core + react-query)
4. **packages/template-generator/templates/api/ts-rest/server/**: Created server templates:
   - src/index.ts.hbs - Contract definition with health check, private data, and todos endpoints
   - src/context.ts.hbs - Context creation for all backends (Hono, Elysia, Express, Fastify, Next.js, TanStack Start, Astro)
   - src/routers/index.ts.hbs - Router implementation with handlers
   - src/routers/todo.ts.hbs - Todo handlers with Drizzle ORM integration
5. **packages/template-generator/templates/api/ts-rest/web/react/base/src/utils/ts-rest.ts.hbs**: React web client template with React Query integration
6. **packages/template-generator/templates/api/ts-rest/native/utils/ts-rest.ts.hbs**: React Native client template
7. **packages/template-generator/templates/api/ts-rest/fullstack/**: Fullstack templates:
   - next/src/app/api/rest/[[...rest]]/route.ts.hbs - Next.js API route handler
   - next/src/utils/ts-rest.ts.hbs - Next.js client
   - tanstack-start/src/routes/api/rest/$.ts.hbs - TanStack Start route handler
   - tanstack-start/src/utils/ts-rest.ts.hbs - TanStack Start client
   - astro/src/pages/api/rest/[...rest].ts.hbs - Astro API route handler
   - astro/src/utils/ts-rest.ts.hbs - Astro client
8. **packages/template-generator/src/template-handlers/frontend.ts**: Updated to include ts-rest for native templates
9. **apps/web/src/lib/constant.ts**: Added ts-rest to web builder API options
10. **apps/cli/src/utils/compatibility-rules.ts**: Updated compatibility rules:
    - Added ts-rest to base API array
    - ts-rest requires React (like tRPC) - not compatible with Nuxt, Svelte, or Solid
    - ts-rest requires React integration for Astro
11. **apps/cli/test/api.test.ts**: Added comprehensive ts-rest tests:
    - Frontend compatibility tests (React frameworks pass, non-React fail)
    - Backend compatibility tests (Hono, Express, Fastify, Elysia)
    - Authentication tests (better-auth)
    - Fullstack mode tests (Next.js, TanStack Start, Astro)
12. **apps/cli/test/test-utils.ts**: Added Email type import and default

### Features:
- Contract-first API design using Zod schemas
- End-to-end type safety between client and server
- React Query integration for data fetching
- Support for all React-based frontends (TanStack Router, React Router, TanStack Start, Next.js)
- Support for React Native (Expo) clients
- Fullstack mode support (Next.js, TanStack Start, Astro with React integration)
- Better-Auth integration support
- Todo example with CRUD operations
- Compatible with Hono, Express, Fastify, and Elysia backends

### Technical Notes:
- ts-rest provides RPC-like experience for REST APIs
- Uses @ts-rest/react-query for React Query bindings
- Uses @ts-rest/serverless for serverless handlers
- Requires React integration (like tRPC) for client-side type safety
- Contract defines API shape with Zod schemas for request/response validation

### Status: COMPLETE


## 2026-01-19: Angular Frontend Framework Implementation

### Task: Implement Angular as a frontend framework option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "angular" to FrontendSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added Angular dependency versions:
   - @angular/core: ^19.2.0
   - @angular/common: ^19.2.0
   - @angular/compiler: ^19.2.0
   - @angular/platform-browser: ^19.2.0
   - @angular/platform-browser-dynamic: ^19.2.0
   - @angular/router: ^19.2.0
   - @angular/forms: ^19.2.0
   - @angular/animations: ^19.2.0
   - @angular-devkit/build-angular: ^19.2.0
   - @angular/cli: ^19.2.0
   - @angular/compiler-cli: ^19.2.0
3. **packages/template-generator/templates/frontend/angular/**: Created Angular templates:
   - package.json.hbs - Angular project dependencies
   - angular.json.hbs - Angular CLI workspace configuration
   - tsconfig.json.hbs - TypeScript config for Angular
   - tsconfig.app.json - App-specific TypeScript config
   - src/index.html - HTML entry point
   - src/main.ts - Bootstrap entry point
   - src/styles.css.hbs - Global styles with Tailwind conditional
   - src/app/app.config.ts - Application configuration
   - src/app/app.routes.ts - Router configuration
   - src/app/app.component.ts.hbs - Root component
   - src/app/components/header.component.ts.hbs - Header component
   - src/app/pages/home/home.component.ts.hbs - Home page component
   - public/favicon.svg - Favicon
   - _gitignore - Git ignore file
4. **packages/template-generator/src/template-handlers/frontend.ts**: Added Angular frontend processing
5. **apps/web/src/lib/constant.ts**: Added Angular to web builder frontend options with red icon
6. **apps/cli/src/utils/compatibility.ts**: Added "angular" to WEB_FRAMEWORKS
7. **apps/cli/src/utils/compatibility-rules.ts**: Added Angular-specific validations:
   - Angular must use backend="none" (has its own built-in dev server)
   - Angular must use api="none" (uses its own HttpClient, doesn't support tRPC/oRPC/ts-rest)
   - Updated isFrontendAllowedWithBackend and allowedApisForFrontends
   - Angular not compatible with Convex backend
8. **apps/cli/src/constants.ts**: Added Angular to compatibility mappings:
   - Added to ADDON_COMPATIBILITY (pwa, tauri)
   - Added to UI_LIBRARY_COMPATIBILITY (daisyui, none)
   - Added angular: "daisyui" to DEFAULT_UI_LIBRARY_BY_FRONTEND
9. **apps/cli/test/frontend.test.ts**: Added Angular-specific tests:
   - Test for Angular standalone (no backend)
   - Tests for Angular incompatibility with tRPC, oRPC, and ts-rest APIs

### Features:
- Full Angular 19 standalone components architecture (no NgModule required)
- Angular CLI workspace configuration
- Built-in routing with @angular/router
- Tailwind CSS conditional support (via daisyUI)
- Standalone mode (no external backend needed - Angular has its own dev server)
- Compatible with PWA and Tauri addons
- Signals-ready reactive architecture

### Technical Notes:
- Angular uses standalone components by default (Angular 14+)
- Angular has its own HttpClient for API calls
- Angular works standalone (backend="none") because it has its own dev server via Angular CLI
- daisyUI is the default UI library for Angular (shadcn-ui requires React)
- Uses Angular 19 with latest standalone component patterns

### Status: COMPLETE


## 2026-01-19: Redux Toolkit State Management Implementation

### Task: Implement Redux Toolkit as a state management option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "redux-toolkit" to StateManagementSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added state management dependency versions:
   - @reduxjs/toolkit: ^2.8.2
   - react-redux: ^9.2.0
   - zustand: ^5.0.5
   - jotai: ^2.12.5
   - nanostores: ^0.11.3
   - @nanostores/react: ^0.8.4
3. **packages/template-generator/src/processors/state-management-deps.ts**: Created new state management processor:
   - Handles zustand, jotai, nanostores, and redux-toolkit
   - Adds dependencies to web and native packages
   - Only applies to React-based frontends
4. **packages/template-generator/src/processors/index.ts**: Registered state management processor
5. **apps/web/src/lib/types.ts**: Added "stateManagement" to TechCategory type
6. **apps/web/src/lib/constant.ts**: Added stateManagement options to TECH_OPTIONS:
   - Zustand, Jotai, Nanostores, Redux Toolkit, None
   - Added stateManagement to StackState type and DEFAULT_STACK
   - Updated all PRESET_TEMPLATES with stateManagement field
7. **apps/web/src/lib/stack-url-state.ts**: Added stateManagement to URL state parsing and serialization
8. **apps/web/src/lib/stack-url-state.client.ts**: Added stateManagement to client-side state
9. **apps/web/src/lib/stack-search-schema.ts**: Added "sm" URL param for stateManagement
10. **apps/web/src/lib/stack-url-keys.ts**: Added stateManagement URL key mapping
11. **apps/cli/test/test-utils.ts**: Added StateManagement type and schema support
12. **apps/cli/test/state-management.test.ts**: Created comprehensive state management tests:
    - Redux Toolkit with TanStack Router, React Router, Next.js, TanStack Start
    - Zustand, Jotai, Nanostores with TanStack Router
    - State management with native apps (native-bare, native-uniwind)
    - None option test

### Features:
- Redux Toolkit with @reduxjs/toolkit and react-redux
- Support for all React-based frontends (TanStack Router, React Router, TanStack Start, Next.js)
- Support for React Native (Expo) apps
- Alternative state management options: Zustand, Jotai, Nanostores
- Full web builder UI integration with state management section
- URL parameter support for sharing configurations

### Technical Notes:
- Redux Toolkit is the modern, recommended way to use Redux
- State management dependencies are only added to React-based packages
- The processor supports both web and native targets
- All state management options work with React and React Native

### Status: COMPLETE


## 2026-01-19: MobX State Management Implementation

### Task: Implement MobX as a state management option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "mobx" to StateManagementSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added MobX dependency versions:
   - mobx: ^6.13.5
   - mobx-react-lite: ^4.1.0
3. **packages/template-generator/src/processors/state-management-deps.ts**: Added MobX case to handle mobx and mobx-react-lite dependencies
4. **apps/web/src/lib/constant.ts**: Added MobX to web builder state management options with orange icon
5. **apps/cli/src/index.ts**: Added stateManagement, forms, testing, ai schemas to CLI router input
6. **apps/cli/src/constants.ts**: Added stateManagement, forms, testing, ai to DEFAULT_CONFIG_BASE
7. **apps/cli/src/utils/config-processing.ts**: Added StateManagement processing to processFlags function
8. **apps/cli/src/prompts/config-prompts.ts**: Added ai, stateManagement, forms, testing to gatherConfig return
9. **apps/cli/src/helpers/core/command-handlers.ts**: Added ai, stateManagement, forms, testing to error config
10. **apps/cli/src/utils/bts-config.ts**: Added missing fields to btsConfig (email, effect, ai, stateManagement, forms, testing, cssFramework, uiLibrary)
11. **apps/cli/test/state-management.test.ts**: Added MobX tests for:
    - MobX with TanStack Router
    - MobX with React Router
    - MobX with Next.js
    - MobX with TanStack Start
    - MobX with React Native (native-bare)

### Features:
- MobX with mobx and mobx-react-lite for lightweight React bindings
- Support for all React-based frontends (TanStack Router, React Router, TanStack Start, Next.js)
- Support for React Native (Expo) apps
- Observable-based reactive state management
- Full web builder UI integration

### Technical Notes:
- MobX uses observable state with automatic tracking of changes
- mobx-react-lite provides lightweight React bindings (recommended over mobx-react for functional components)
- MobX dependencies are only added to React-based packages
- Fixed CLI config flow to properly pass stateManagement option from CLI flags to generator

### Status: COMPLETE


## 2026-01-19: XState State Management Implementation

### Task: Implement XState as a state management option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "xstate" to StateManagementSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added XState dependency versions:
   - xstate: ^5.19.4
   - @xstate/react: ^5.0.4
3. **packages/template-generator/src/processors/state-management-deps.ts**: Added XState case to handle xstate and @xstate/react dependencies
4. **apps/web/src/lib/constant.ts**: Added XState to web builder state management options with slate/dark icon
5. **apps/cli/test/state-management.test.ts**: Added XState tests for:
   - XState with TanStack Router
   - XState with React Router
   - XState with Next.js
   - XState with TanStack Start
   - XState with React Native (native-bare, native-uniwind)

### Features:
- XState with xstate and @xstate/react for React integration
- Support for all React-based frontends (TanStack Router, React Router, TanStack Start, Next.js)
- Support for React Native (Expo) apps
- State machines and statecharts for complex application logic
- Full web builder UI integration

### Technical Notes:
- XState provides state machines and statecharts for managing complex state logic
- @xstate/react provides React hooks for using XState machines in React components
- XState dependencies are only added to React-based packages
- Uses XState v5 with the latest actor-based API

### Status: COMPLETE


## 2026-01-19: Valtio State Management Implementation

### Task: Implement Valtio as a state management option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "valtio" to StateManagementSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added Valtio dependency version:
   - valtio: ^2.1.2
3. **packages/template-generator/src/processors/state-management-deps.ts**: Added Valtio case to handle valtio dependency
4. **apps/web/src/lib/constant.ts**: Added Valtio to web builder state management options with teal icon
5. **apps/cli/test/state-management.test.ts**: Added Valtio tests for:
   - Valtio with TanStack Router
   - Valtio with React Router
   - Valtio with Next.js
   - Valtio with TanStack Start
   - Valtio with React Native (native-bare, native-uniwind)

### Features:
- Valtio proxy-based state management
- Support for all React-based frontends (TanStack Router, React Router, TanStack Start, Next.js)
- Support for React Native (Expo) apps
- Full web builder UI integration

### Technical Notes:
- Valtio uses JavaScript Proxies for automatic state tracking
- Created by the same authors as Zustand (Daishi Kato / Poimandres)
- Valtio dependencies are only added to React-based packages
- Simple API: just mutate the proxy state and components re-render automatically

### Status: COMPLETE


## 2026-01-19: TanStack Store State Management Implementation

### Task: Implement TanStack Store as a state management option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "tanstack-store" to StateManagementSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added TanStack Store dependency versions:
   - @tanstack/store: ^0.8.0
   - @tanstack/react-store: ^0.8.0
3. **packages/template-generator/src/processors/state-management-deps.ts**: Added TanStack Store case to handle @tanstack/store and @tanstack/react-store dependencies
4. **apps/web/src/lib/constant.ts**: Added TanStack Store to web builder state management options with red-orange gradient
5. **apps/cli/test/state-management.test.ts**: Added TanStack Store tests for:
   - TanStack Store with TanStack Router
   - TanStack Store with React Router
   - TanStack Store with Next.js
   - TanStack Store with TanStack Start
   - TanStack Store with React Native (native-bare, native-uniwind)

### Features:
- TanStack Store with @tanstack/store core and @tanstack/react-store React bindings
- Support for all React-based frontends (TanStack Router, React Router, TanStack Start, Next.js)
- Support for React Native (Expo) apps
- Framework-agnostic store that powers the TanStack ecosystem
- Full web builder UI integration

### Technical Notes:
- TanStack Store is the core state management library powering TanStack Query, TanStack Router, and other TanStack tools
- @tanstack/react-store provides React-specific hooks and bindings
- TanStack Store dependencies are only added to React-based packages
- Uses immutable, reactive data store architecture

### Status: COMPLETE


## 2026-01-19: Legend State State Management Implementation

### Task: Implement Legend State as a state management option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "legend-state" to StateManagementSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added Legend State dependency versions:
   - @legendapp/state: ^3.0.0
   - @legendapp/state-react: ^4.0.0
3. **packages/template-generator/src/processors/state-management-deps.ts**: Added Legend State case to handle @legendapp/state and @legendapp/state-react dependencies
4. **apps/web/src/lib/constant.ts**: Added Legend State to web builder state management options with violet icon
5. **apps/cli/test/state-management.test.ts**: Added Legend State tests for:
   - Legend State with TanStack Router
   - Legend State with React Router
   - Legend State with Next.js
   - Legend State with TanStack Start
   - Legend State with React Native (native-bare, native-uniwind)

### Features:
- Legend State with @legendapp/state core and @legendapp/state-react React bindings
- Support for all React-based frontends (TanStack Router, React Router, TanStack Start, Next.js)
- Support for React Native (Expo) apps
- High-performance observable state management
- Full web builder UI integration

### Technical Notes:
- Legend State is a high-performance observable state library for React
- @legendapp/state-react provides React-specific hooks and components
- Legend State dependencies are only added to React-based packages
- Uses fine-grained reactivity for optimal performance with minimal re-renders
- Supports persistence, syncing, and computed observables out of the box

### Status: COMPLETE


## 2026-01-19: Auth.js (NextAuth) Authentication Implementation

### Task: Implement Auth.js (NextAuth) as an authentication option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "nextauth" to AuthSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added Auth.js dependency versions:
   - next-auth: ^5.0.0-beta.28
   - @auth/core: ^0.39.1
   - @auth/drizzle-adapter: ^1.8.1
   - @auth/prisma-adapter: ^2.9.1
3. **packages/template-generator/src/processors/auth-deps.ts**: Added NextAuth dependency processing:
   - Core next-auth and @auth/core packages
   - @auth/drizzle-adapter for Drizzle ORM
   - @auth/prisma-adapter for Prisma ORM
4. **packages/template-generator/src/template-handlers/auth.ts**: Added NextAuth template processing:
   - Handles fullstack Next.js templates
   - Handles web React/Next.js templates
   - Handles database schema templates for Drizzle and Prisma
5. **packages/template-generator/templates/auth/nextauth/**: Created NextAuth templates:
   - fullstack/next/src/lib/auth.ts.hbs - Main NextAuth configuration with GitHub and Google providers
   - fullstack/next/src/app/api/auth/[...nextauth]/route.ts.hbs - API route handler
   - fullstack/next/src/middleware.ts.hbs - Auth middleware for protected routes
   - web/react/next/src/lib/auth-client.ts.hbs - Client-side auth utilities
   - web/react/next/src/components/providers.tsx.hbs - SessionProvider wrapper
   - web/react/next/src/components/sign-in-form.tsx.hbs - Sign-in form component
   - web/react/next/src/components/sign-up-form.tsx.hbs - Sign-up form component
   - web/react/next/src/components/user-menu.tsx.hbs - User dropdown menu
   - web/react/next/src/app/login/page.tsx.hbs - Login page
   - web/react/next/src/app/dashboard/page.tsx.hbs - Protected dashboard page
   - web/react/next/src/app/dashboard/dashboard.tsx.hbs - Dashboard client component
   - server/db/drizzle/postgres/src/schema/auth.ts.hbs - Drizzle Postgres auth schema
   - server/db/drizzle/sqlite/src/schema/auth.ts.hbs - Drizzle SQLite auth schema
   - server/db/drizzle/mysql/src/schema/auth.ts.hbs - Drizzle MySQL auth schema
   - server/db/prisma/postgres/prisma/schema/auth.prisma.hbs - Prisma Postgres auth schema
   - server/db/prisma/sqlite/prisma/schema/auth.prisma.hbs - Prisma SQLite auth schema
   - server/db/prisma/mysql/prisma/schema/auth.prisma.hbs - Prisma MySQL auth schema
6. **apps/web/src/lib/constant.ts**: Added NextAuth to web builder authentication options with orange icon
7. **apps/cli/src/utils/compatibility-rules.ts**: Added NextAuth validation rules:
   - validateNextAuthCompatibility function to ensure NextAuth only works with self backend and Next.js frontend
   - Updated isFrontendAllowedWithBackend to check NextAuth constraints
8. **apps/cli/src/utils/config-validation.ts**: Added validateNextAuthCompatibility import and call
9. **packages/template-generator/src/processors/env-vars.ts**: Added NextAuth environment variables:
   - AUTH_SECRET - NextAuth.js secret
   - AUTH_TRUST_HOST - Trust host header
   - AUTH_GITHUB_ID - GitHub OAuth client ID
   - AUTH_GITHUB_SECRET - GitHub OAuth client secret
   - AUTH_GOOGLE_ID - Google OAuth client ID
   - AUTH_GOOGLE_SECRET - Google OAuth client secret
10. **apps/cli/test/auth.test.ts**: Added comprehensive NextAuth tests:
    - NextAuth with self backend + Next.js + Drizzle
    - NextAuth with self backend + Next.js + Prisma
    - NextAuth with self backend + Next.js + SQLite
    - Failure test: NextAuth with non-self backend
    - Failure test: NextAuth with non-Next.js frontend
    - Failure test: NextAuth with Convex backend

### Features:
- Auth.js v5 (NextAuth) authentication for Next.js fullstack apps
- OAuth providers: GitHub, Google (easily extensible)
- Database adapters: Drizzle and Prisma
- Session strategies: Database and JWT support
- Protected routes via middleware
- Client-side auth utilities with useSession hook
- Pre-built UI components: sign-in form, sign-up form, user menu
- Login and dashboard pages
- Database schemas for all supported databases (PostgreSQL, SQLite, MySQL)

### Technical Notes:
- Auth.js v5 (NextAuth) is specifically designed for Next.js fullstack applications
- Requires self backend (Next.js API routes handle auth)
- Uses @auth/drizzle-adapter or @auth/prisma-adapter based on ORM choice
- Environment variables follow Auth.js conventions (AUTH_* prefix)
- Validation rules ensure NextAuth is only used with compatible configurations

### Status: COMPLETE


## 2026-01-19: Valibot Validation Library Implementation

### Task: Implement Valibot as a validation library option

### Changes Made:
1. **packages/types/src/schemas.ts**: Created ValidationSchema with "zod", "valibot", "none" options
   - Added validation to CreateInputSchema, ProjectConfigSchema, BetterTStackConfigSchema
   - Added VALIDATION_VALUES export
2. **packages/types/src/types.ts**: Added Validation type export
3. **packages/template-generator/src/utils/add-deps.ts**: Added Valibot dependency version:
   - valibot: ^1.1.0
4. **packages/template-generator/src/processors/validation-deps.ts**: Created new validation processor:
   - Handles valibot dependency addition
   - Adds dependencies to api, server, web, and native packages
   - Skips processing for "zod" and "none" (zod is added by workspace-deps)
5. **packages/template-generator/src/processors/index.ts**: Registered validation processor
6. **apps/web/src/lib/types.ts**: Added "validation" to TechCategory type
7. **apps/web/src/lib/constant.ts**: Added validation options to TECH_OPTIONS:
   - Zod (default), Valibot, No Validation
   - Added validation to StackState type and DEFAULT_STACK
8. **apps/web/src/lib/stack-url-state.ts**: Added validation to URL state parsing and serialization
9. **apps/web/src/lib/stack-url-state.client.ts**: Added validation to client-side state
10. **apps/web/src/lib/stack-search-schema.ts**: Added "va" URL param for validation
11. **apps/web/src/lib/stack-url-keys.ts**: Added validation URL key mapping
12. **apps/cli/src/index.ts**: Added ValidationSchema to CLI router input
13. **apps/cli/src/constants.ts**: Added validation to DEFAULT_CONFIG_BASE
14. **apps/cli/src/utils/config-processing.ts**: Added Validation processing to processFlags function
15. **apps/cli/src/prompts/config-prompts.ts**: Added validation to gatherConfig return
16. **apps/cli/src/helpers/core/command-handlers.ts**: Added validation to error config
17. **apps/cli/src/utils/bts-config.ts**: Added validation field to btsConfig
18. **apps/cli/test/test-utils.ts**: Added Validation type and schema support
19. **apps/cli/test/validation.test.ts**: Created comprehensive validation tests:
    - Valibot with TanStack Router, React Router, Next.js, TanStack Start
    - Valibot with different backends (Hono, Express, Fastify)
    - Valibot with native apps (native-bare, native-uniwind)
    - Zod validation (default) tests
    - No validation option tests

### Features:
- Valibot as a smaller bundle alternative to Zod (~1KB vs ~12KB)
- Support for all React-based frontends (TanStack Router, React Router, TanStack Start, Next.js)
- Support for React Native (Expo) apps
- Support for all backend frameworks (Hono, Express, Fastify, Elysia, NestJS)
- Full web builder UI integration with validation section
- URL parameter support for sharing configurations
- Zod remains available internally for internal usage even when Valibot is selected

### Technical Notes:
- Valibot provides similar functionality to Zod with a much smaller bundle size
- Validation dependencies are added to api, server, web, and native packages
- Zod is still included by default via workspace-deps for internal usage
- Valibot can be used as the primary validation library in user code
- Uses Valibot v1.1.0 with latest API

### Status: COMPLETE


## 2026-01-19: ArkType Validation Library Implementation

### Task: Implement ArkType as a validation library option

### Changes Made:
1. **packages/types/src/schemas.ts**: Added "arktype" to ValidationSchema enum
2. **packages/template-generator/src/utils/add-deps.ts**: Added ArkType dependency version:
   - arktype: ^2.1.29
3. **packages/template-generator/src/processors/validation-deps.ts**: Added ArkType case to handle arktype dependency
4. **apps/web/src/lib/constant.ts**: Added ArkType to web builder validation options with purple icon
5. **apps/cli/test/validation.test.ts**: Added comprehensive ArkType tests:
   - ArkType with TanStack Router
   - ArkType with React Router
   - ArkType with Next.js
   - ArkType with TanStack Start
   - ArkType with Hono backend
   - ArkType with Express backend
   - ArkType with Fastify backend
   - ArkType with React Native (native-bare, native-uniwind)

### Features:
- ArkType TypeScript-first validation library (2-4x faster than Zod)
- Support for all React-based frontends (TanStack Router, React Router, TanStack Start, Next.js)
- Support for React Native (Expo) apps
- Support for all backend frameworks (Hono, Express, Fastify, Elysia, NestJS)
- Full web builder UI integration with validation section
- URL parameter support for sharing configurations

### Technical Notes:
- ArkType provides similar functionality to Zod with significantly better performance
- Uses powerful TypeScript type inference for schema definitions
- Validation dependencies are added to api, server, web, and native packages
- Zod is still included by default via workspace-deps for internal usage
- ArkType can be used as the primary validation library in user code
- Uses ArkType v2.1.29 with latest API

### Status: COMPLETE

