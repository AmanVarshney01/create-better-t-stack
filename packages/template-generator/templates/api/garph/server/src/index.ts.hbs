import { g, buildSchema, InferResolvers } from "garph";

// Define GraphQL types using Garph's type-safe builder
{{#if (eq auth "better-auth")}}
export const userType = g.type("User", {
  id: g.string(),
  email: g.string(),
  name: g.string().nullable(),
});

export const privateDataType = g.type("PrivateData", {
  message: g.string(),
  user: g.ref(userType),
});
{{/if}}

export const queryType = g.type("Query", {
  health: g.string().description("Health check endpoint"),
{{#if (eq auth "better-auth")}}
  privateData: g.ref(privateDataType).nullable().description("Get private data (requires authentication)"),
{{/if}}
});

export const mutationType = g.type("Mutation", {
  _empty: g.string().nullable().description("Placeholder mutation"),
});

// Export types for resolver type inference
export type QueryType = typeof queryType;
export type MutationType = typeof mutationType;

// Re-export Garph utilities for use in resolvers
export { g, buildSchema, type InferResolvers };
