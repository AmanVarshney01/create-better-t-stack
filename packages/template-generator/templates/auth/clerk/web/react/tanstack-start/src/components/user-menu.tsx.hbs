import { Link } from "@tanstack/react-router";
import { SignInButton, UserButton, useUser } from "@clerk/tanstack-react-start";

export default function UserMenu() {
	const { isLoaded, user } = useUser();

	if (!isLoaded) {
		return null;
	}

	if (!user) {
		return (
			<SignInButton>
				<button
					type="button"
					className="rounded-md border px-3 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground"
				>
					Sign In
				</button>
			</SignInButton>
		);
	}

	return (
		<div className="flex items-center gap-2">
			<Link
				to="/dashboard"
				className="rounded-md border px-3 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground"
			>
				Dashboard
			</Link>
			<UserButton />
		</div>
	);
}
